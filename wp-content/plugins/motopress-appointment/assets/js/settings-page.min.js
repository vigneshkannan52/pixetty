!function(){"use strict";!function(){class t{constructor(t){this.$element=t,this.type=t.data("type"),this.$element.attr("data-inited","true")}}class e extends t{constructor(t){super(t),this.$input=t.find("input").first(),this.$input.spectrum()}}let s="/motopress/appointment/v1";function n(t,e={}){return function(t,e={},n="GET"){return new Promise(((i,a)=>{wp.apiRequest({path:s+t,type:n,data:e}).done((t=>i(t))).fail(((t,e)=>{let s="parsererror";s=t.responseJSON&&t.responseJSON.message?t.responseJSON.message:`Status: ${e}`,"parsererror"==s&&(s="REST request failed. Maybe PHP error on the server side. Check PHP logs."),a(new Error(s))}))}))}(t,e,"GET")}class i{constructor(){this.settings=this.getDefaults(),this.loadingPromise=this.load()}getDefaults(){return{plugin_name:"Appointment Booking",today:"2030-01-01",business_name:"",default_time_step:30,default_booking_status:"confirmed",confirmation_mode:"auto",terms_page_id_for_acceptance:0,allow_multibooking:!1,allow_coupons:!1,allow_customer_account_creation:!1,country:"",currency:"EUR",currency_symbol:"&euro;",currency_position:"before",decimal_separator:".",thousand_separator:",",number_of_decimals:2,date_format:"F j, Y",time_format:"H:i",week_starts_on:0,thumbnail_size:{width:150,height:150},flatpickr_locale:"en",enable_payments:!1,active_gateways:[],payment_received_page_url:"",failed_transaction_page_url:"",default_payment_gateway:""}}load(){return new Promise(((t,e)=>{n("/settings").then((t=>this.settings=t),(t=>console.error("Unable to load public settings.",t))).finally((()=>t(this.settings)))}))}ready(){return this.loadingPromise}getPluginName(){return this.settings.plugin_name}getBusinessDate(){return this.settings.today}getBusinessName(){return this.settings.business_name}getTimeStep(){return this.settings.default_time_step}getDefaultBookingStatus(){return this.settings.default_booking_status}getConfirmationMode(){return this.settings.confirmation_mode}getTermsPageIdForAcceptance(){return this.settings.terms_page_id_for_acceptance}isMultibookingEnabled(){return this.settings.allow_multibooking}isCouponsEnabled(){return this.settings.allow_coupons}isAllowCustomerAccountCreation(){return this.settings.allow_customer_account_creation}getCountry(){return this.settings.country}getCurrency(){return this.settings.currency}getCurrencySymbol(){return this.settings.currency_symbol}getCurrencyPosition(){return this.settings.currency_position}getDecimalSeparator(){return this.settings.decimal_separator}getThousandSeparator(){return this.settings.thousand_separator}getDecimalsCount(){return this.settings.number_of_decimals}getDateFormat(){return this.settings.date_format}getTimeFormat(){return this.settings.time_format}getFirstDayOfWeek(){return this.settings.week_starts_on}getThumbnailSize(){return this.settings.thumbnail_size}getFlatpickrLocale(){return this.settings.flatpickr_locale}isPaymentsEnabled(){return this.settings.enable_payments}getActiveGateways(){return this.settings.active_gateways}getPaymentReceivedPageUrl(){return this.settings.payment_received_page_url}getFailedTransactionPageUrl(){return this.settings.failed_transaction_page_url}getDefaultPaymentGateway(){return this.settings.default_payment_gateway}}class a{constructor(){this.settingsCtrl=new i,this.loadingPromise=this.load()}load(){return Promise.all([this.settingsCtrl.ready()]).then((()=>this))}ready(){return this.loadingPromise}settings(){return this.settingsCtrl}static getInstance(){return null==a.instance&&(a.instance=new a),a.instance}}const r="undefined"!=typeof wp&&wp.i18n&&wp.i18n.__?wp.i18n.__:(t,e="")=>t,o="undefined"!=typeof wp&&wp.i18n&&wp.i18n._x?wp.i18n._x:(t,e,s="")=>t;"undefined"!=typeof wp&&wp.i18n&&wp.i18n.sprintf&&wp.i18n.sprintf,r("Sun","motopress-appointment"),r("Mon","motopress-appointment"),r("Tue","motopress-appointment"),r("Wed","motopress-appointment"),r("Thu","motopress-appointment"),r("Fri","motopress-appointment"),r("Sat","motopress-appointment"),r("Sunday","motopress-appointment"),r("Monday","motopress-appointment"),r("Tuesday","motopress-appointment"),r("Wednesday","motopress-appointment"),r("Thursday","motopress-appointment"),r("Friday","motopress-appointment"),r("Saturday","motopress-appointment"),r("Jan","motopress-appointment"),r("Feb","motopress-appointment"),r("Mar","motopress-appointment"),r("Apr","motopress-appointment"),o("May","Month (short)","motopress-appointment"),r("Jun","motopress-appointment"),r("Jul","motopress-appointment"),r("Aug","motopress-appointment"),r("Sep","motopress-appointment"),r("Oct","motopress-appointment"),r("Nov","motopress-appointment"),r("Dec","motopress-appointment"),r("January","motopress-appointment"),r("February","motopress-appointment"),r("March","motopress-appointment"),r("April","motopress-appointment"),o("May","Month","motopress-appointment"),r("June","motopress-appointment"),r("July","motopress-appointment"),r("August","motopress-appointment"),r("September","motopress-appointment"),r("October","motopress-appointment"),r("November","motopress-appointment"),r("December","motopress-appointment"),a.getInstance().settings().getFirstDayOfWeek();class p extends t{constructor(t){super(t),this.setupProperties(),this.addListeners()}setupProperties(){this.$input=this.$element.find('input[type="hidden"]'),this.$preview=this.$element.find(".mpa-preview-wrapper > img"),this.$addButton=this.$element.find(".mpa-add-media"),this.$removeButton=this.$element.find(".mpa-remove-media"),this.thumbnailSize=this.$input.attr("thumbnail-size")}addListeners(){this.$preview.on("click",this.selectMedia.bind(this)),this.$addButton.on("click",this.selectMedia.bind(this)),this.$removeButton.on("click",this.removeMedia.bind(this))}getRawValue(){return this.$input.val()}getValue(){return function(t){let e=parseInt(t);return isNaN(e)?t<<0:e}(this.getRawValue())}setValue(t){this.updateValue(t),this.react()}updateValue(t){this.$input.val(t)}react(){let t=!!this.getValue();this.$addButton.toggleClass("mpa-hide",t),this.$removeButton.toggleClass("mpa-hide",!t),t?this.updatePreview():this.resetPreview()}updatePreview(){let t=wp.media.attachment(this.getValue()).attributes.sizes[this.thumbnailSize].url;this.$preview.removeClass("mpa-hide").attr("src",t)}resetPreview(){this.$preview.addClass("mpa-hide").attr("src","")}selectMedia(t){t.preventDefault();let e=wp.media({multiple:!1});e.open().on("select",(t=>{let s=e.state().get("selection").first().toJSON().id;this.setValue(s)}))}removeMedia(t){t.preventDefault(),this.setValue("")}}new class{constructor(){this.setupFields(jQuery(".mpa-ctrl:not([data-inited])")),this.initStripeMethodsDependency()}setupFields(t){t.each((function(t,s){let n=jQuery(s);switch(n.attr("data-type")){case"color-picker":new e(n);break;case"image":new p(n)}}))}initStripeMethodsDependency(){const t=jQuery("#mpa_stripe_payment_gateway_payment_methods-card"),e=jQuery("#mpa_stripe_payment_gateway_payment_methods-apple_pay, #mpa_stripe_payment_gateway_payment_methods-google_pay, #mpa_stripe_payment_gateway_payment_methods-link");t.click((t=>{t.target.checked||e.prop("checked",!1)})),e.click((e=>{e.target.checked&&t.prop("checked",!0)}))}}}()}();
