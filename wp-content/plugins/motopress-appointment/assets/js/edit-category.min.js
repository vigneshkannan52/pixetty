!function(){"use strict";!function(){class e{constructor(e){this.$element=e,this.type=e.data("type"),this.$element.attr("data-inited","true")}}class t extends e{constructor(e){super(e),this.setupProperties(),this.addListeners()}setupProperties(){this.$input=this.$element.find('input[type="hidden"]'),this.$preview=this.$element.find(".mpa-preview-wrapper > img"),this.$addButton=this.$element.find(".mpa-add-media"),this.$removeButton=this.$element.find(".mpa-remove-media"),this.thumbnailSize=this.$input.attr("thumbnail-size")}addListeners(){this.$preview.on("click",this.selectMedia.bind(this)),this.$addButton.on("click",this.selectMedia.bind(this)),this.$removeButton.on("click",this.removeMedia.bind(this))}getRawValue(){return this.$input.val()}getValue(){return function(e){let t=parseInt(e);return isNaN(t)?e<<0:t}(this.getRawValue())}setValue(e){this.updateValue(e),this.react()}updateValue(e){this.$input.val(e)}react(){let e=!!this.getValue();this.$addButton.toggleClass("mpa-hide",e),this.$removeButton.toggleClass("mpa-hide",!e),e?this.updatePreview():this.resetPreview()}updatePreview(){let e=wp.media.attachment(this.getValue()).attributes.sizes[this.thumbnailSize].url;this.$preview.removeClass("mpa-hide").attr("src",e)}resetPreview(){this.$preview.addClass("mpa-hide").attr("src","")}selectMedia(e){e.preventDefault();let t=wp.media({multiple:!1});t.open().on("select",(e=>{let i=t.state().get("selection").first().toJSON().id;this.setValue(i)}))}removeMedia(e){e.preventDefault(),this.setValue("")}}let i=jQuery(".mpa-meta-featured-image > td").first();i.length>0&&(i.addClass("mpa-media-ctrl"),new t(i))}()}();
